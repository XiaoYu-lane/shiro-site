<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-  2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<html>




























<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Apache Shiro is a powerful and easy-to-use Java security framework that performs authentication, authorization, cryptography, and session management.">
    <meta name="google-site-verification" content="QIax6uT5UX3enoU0G8Pz2pXbQ45KaQuHZ3nCh9V27mw">
    <meta name="google-site-verification" content="ecFap6dWJgS_GCCtxmJQJ_nFYQhM6EgSpBPZDU7xsCE">
    <meta name="msvalidate.01" content="0B57EB46CBFAD8FD45008D2DB6B6C68C">
    <meta name="y_key" content="e47896cd6bae4920">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

    <title>
                Apache Shiro | Simple. Java. Security.
    </title>


    <link rel="icon" type="image/vnd.microsoft.icon" href="./assets/images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

    <!-- site styles and  -->
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css">
    <script type="text/javascript" src="./assets/js/shiro-site.js"></script>

    <!-- github ribbon -->
    <link rel="stylesheet" href="./assets/css/gh-pages/gh-fork-ribbon.css" />
    <!--[if lt IE 9]>
      <link rel="stylesheet" href="./assets/css/gh-pages/gh-fork-ribbon.ie.css" />
    <![endif]-->

    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

    <!-- bootstrap -->
    <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap-theme.min.css">
    <script src="./assets/bootstrap/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./assets/css/bootstrap-social.css">

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->



    <!-- syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js" integrity="sha256-s63qpgPYoQk+wv3U6WZqioVJrwFNBTgD4dkeegLuwvo=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script type="text/javascript">

        $( document ).ready(function() {
            addPageEditLink();
        });
    </script>
</head>

<body>

    <div id="top-bar"></div>

    <div class="container" style="max-width: 1200px;">

    <a class="github-fork-ribbon right-top" href="https://github.com/apache/shiro" title="Fork me on GitHub">Fork me on GitHub</a>



    <div class="masthead">
        <p class="lead">
            <a href="./index.html">
                <img src="./assets/images/apache-shiro-logo.png" style="height:100px; width:auto; vertical-align: bottom; margin-top: 20px;">
            </a>
            <span class="tagline">Simple. Java. Security.</span>
            <a class="pull-right" href="https://www.apache.org/events/current-event.html">
                <img style="padding-top: 8px" src="https://www.apache.org/events/current-event-125x125.png"/>
            </a>
        </p>
    </div>



    <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="./get-started.html">Get Started</a></li>
                <li><a href="./documentation.html">Docs</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        Web Apps <b class="caret"></b>
                    </a>

                    <ul class="dropdown-menu">
                        <li><a href="./web.html">General</a></li>
                        <li class="divider"></li>
                        <li><a href="./web-features.html">Features</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        Integrations <b class="caret"></b>
                    </a>

                    <ul class="dropdown-menu">
                        <li><a href="./spring-boot.html">Spring</a></li>
                        <li><a href="./guice.html">Guice</a></li>
                        <li class="divider"></li>
                        <li><a href="./integration.html">Third-Party Integrations</a></li>
                    </ul>
                </li>

                <li><a href="./features.html">Features</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        Community <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="./forums.html">Community Forums</a></li>
                        <li><a href="./mailing-lists.html">Mailing Lists</a></li>
                        <li><a href="./articles.html">Articles</a></li>
                        <li><a href="./news.html">News</a></li>
                        <li><a href="./events.html">Events</a></li>
                        <li class="divider"></li>
                        <li><a href="./community.html">More</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        About <b class="caret"></b>
                    </a>

                    <ul class="dropdown-menu">
                        <li><a href="./about.html">About</a></li>
                        <li><a href="./security-reports.html">Vulnerability Reports</a></li>
                    </ul>
                </li>

            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="http://www.apache.org/" class="dropdown-toggle" data-toggle="dropdown">
                        Apache Software Foundation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="http://www.apache.org/">Apache Homepage</a></li>
                        <li><a href="http://www.apache.org/licenses/">License</a></li>
                        <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                        <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                        <li><a href="http://www.apache.org/security/">Security</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </nav>




<!-- spacer allows enough room to display the header -->
<div id="spacer" style="width: 0; height: 60px; float: left"></div>

<!-- related content (if any) -->
  <div style="border-style: solid; border-width: 2px; border-color: navy; padding: 5px; margin-left: 20px; margin-bottom: 20px; width:275px; float: right; clear: both; ">
      <h2>Related Content</h2>
            <h3><a href="web-features.html">Web Apps with Shiro</a></h3>
            <p>Learn more about integrating Shiro into web applications.</br><span style="font-size:11"><a href="web-features.html">Read More &gt;&gt;</a></span></p>
            <h3><a href="webapp-tutorial.html">Web App Tutorial</a></h3>
            <p>Step-by-step tutorial for securing a web application with Shiro.</br><span style="font-size:11"><a href="webapp-tutorial.html">Read More &gt;&gt;</a></span></p>
            <h3><a href="session-management-features.html">Session Management</a></h3>
            <p>Shiro enables sessions for any application environment. Learn more!</br><span style="font-size:11"><a href="session-management-features.html">Read More &gt;&gt;</a></span></p>
            <h3><a href="permissions.html">Permissions</a></h3>
            <p>Learn more about Shiro's powerful and intuitive permission syntax.</br><span style="font-size:11"><a href="permissions.html">Read More &gt;&gt;</a></span></p>
            <h3><a href="java-authentication-guide.html">Java Authentication Guide</a></h3>
            <p>Learn how Authentication in Java is performed in Shiro.</br><span style="font-size:11"><a href="java-authentication-guide.html">Read More &gt;&gt;</a></span></p>
            <h3><a href="java-authorization-guide.html">Java Authorization Guide</a></h3>
            <p>Learn how Shiro handles access control in Java.</br><span style="font-size:11"><a href="java-authorization-guide.html">Read More &gt;&gt;</a></span></p>
  </div>
<style>

    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        border-color: #ccc;
    }
    th {
        background-color: #f0f0f0
    }
    th, td {
        padding: 8px;
    }
</style>
<a name="Web-ApacheShiroWebSupport"></a>
<h1><a href="#apache-shiro-web-support" name="apache-shiro-web-support">Apache Shiro Web Support</a></h1>
<ul>
  <li>
    <p><a href="#Web-Configuration">Configuration</a></p>
    <ul>
      <li>
        <p><a href="#Web-%7B%7Bweb.xml%7D%7D"><code>web.xml</code></a></p>
        <ul>
          <li>
            <p><a href="#Web-Shiro1.2andlater">Shiro 1.2 and later</a></p>
            <ul>
              <li><a href="#Web-Custom%7B%7BWebEnvironment%7D%7DClass">Custom <code>WebEnvironment</code> Class</a></li>
              <li><a href="#Web-CustomConfigurationLocations">Custom Configuration Locations</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#Web-Shiro1.1andearlier">Shiro 1.1 and earlier</a></p>
            <ul>
              <li><a href="#Web-CustomPath">Custom Path</a></li>
              <li><a href="#Web-InlineConfig">Inline Config</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p><a href="#Web-WebINIconfiguration">Web INI configuration</a></p>
        <ul>
          <li>
            <p><a href="#Web-%7B%7B%5Curls%5C%7D%7D"><code>[urls]</code></a></p>
            <ul>
              <li><a href="#Web-URLPathExpressions">URL Path Expressions</a></li>
              <li><a href="#Web-FilterChainDefinitions">Filter Chain Definitions</a>
                <ul>
                  <li>
                  <p><a href="#Web-AvailableFilters">Available Filters</a></p></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
  <p><a href="#Web-DefaultFilters">Default Filters</a></p></li>
  <li><a href="#Web-EnablingandDisablingFilters">Enabling and Disabling Filters</a>
    <ul>
      <li><a href="#Web-GeneralEnabling%2FDisabling">General Enabling/Disabling</a></li>
      <li><a href="#Web-RequestspecificEnabling%2FDisabling">Request-specific Enabling/Disabling</a></li>
      <li><a href="#Web-PathspecificEnabling%2FDisabling">Path-specific Enabling/Disabling</a></li>
      <li><a href="#Web-globalFilters">Global Filters</a></li>
      <li><a href="#Web-HSTS">HTTP Strict Transport Security (HSTS)</a></li>
    </ul>
  </li>
  <li>
    <p><a href="#Web-SessionManagement">Session Management</a></p>
    <ul>
      <li>
        <p><a href="#Web-ServletContainerSessions">Servlet Container Sessions</a></p>
        <ul>
          <li>
          <p><a href="#Web-ServletContainerSessionTimeout">Servlet Container Session Timeout</a></p></li>
        </ul>
      </li>
      <li>
        <p><a href="#Web-NativeSessions">Native Sessions</a></p>
        <ul>
          <li>
            <p><a href="#Web-%7B%7BDefaultWebSessionManager%7D%7D"><code>DefaultWebSessionManager</code></a></p>
            <ul>
              <li><a href="#Web-NativeSessionTimeout">Native Session Timeout</a></li>
              <li><a href="#Web-SessionCookie">Session Cookie</a>
                <ul>
                  <li><a href="#Web-SessionCookieConfiguration">Session Cookie Configuration</a></li>
                  <li><a href="#Web-DisablingtheSessionCookie">Disabling the Session Cookie</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><a href="#Web-RememberMeServices">Remember Me Services</a></p>
    <ul>
      <li><a href="#Web-ProgrammaticSupport">Programmatic Support</a></li>
      <li><a href="#Web-FormbasedLogin">Form-based Login</a></li>
      <li><a href="#Web-Cookieconfiguration">Cookie configuration</a></li>
      <li><a href="#Web-Custom%7B%7BRememberMeManager%7D%7D">Custom <code>RememberMeManager</code></a></li>
    </ul>
  </li>
  <li>
    <p><a href="#Web-JSP%2FGSPTagLibrary">JSP / GSP Tag Library</a></p>
    <ul>
      <li><a href="#Web-TagLibraryConfiguration">Tag Library Configuration</a></li>
      <li><a href="#Web-The%7B%7Bguest%7D%7Dtag">The <code>guest</code> tag</a></li>
      <li><a href="#Web-The%7B%7Buser%7D%7Dtag">The <code>user</code> tag</a></li>
      <li><a href="#Web-The%7B%7Bauthenticated%7D%7Dtag">The <code>authenticated</code> tag</a></li>
      <li><a href="#Web-The%7B%7BnotAuthenticated%7D%7Dtag">The <code>notAuthenticated</code> tag</a></li>
      <li><a href="#Web-The%7B%7Bprincipal%7D%7Dtag">The <code>principal</code> tag</a>
        <ul>
          <li><a href="#Web-Typedprincipal">Typed principal</a></li>
          <li><a href="#Web-Principalproperty">Principal property</a></li>
        </ul>
      </li>
      <li>
      <p><a href="#Web-The%7B%7BhasRole%7D%7Dtag">The <code>hasRole</code> tag</a></p></li>
      <li><a href="#Web-The%7B%7BlacksRole%7D%7Dtag">The <code>lacksRole</code> tag</a></li>
      <li><a href="#Web-The%7B%7BhasAnyRole%7D%7Dtag">The <code>hasAnyRole</code> tag</a></li>
      <li><a href="#Web-The%7B%7BhasPermission%7D%7Dtag">The <code>hasPermission</code> tag</a></li>
      <li><a href="#Web-The%7B%7BlacksPermission%7D%7Dtag">The <code>lacksPermission</code> tag</a></li>
    </ul>
  </li>
</ul>
<a name="Web-configuration"></a>
<a name="Web-Configuration"></a>
<h2><a href="#configuration" name="configuration">Configuration</a></h2>
<p>The simplest way to integrate Shiro into any web application is to configure a Servlet ContextListener and Filter in web.xml that understands how to read Shiro&rsquo;s INI configuration. The bulk of the INI config format itself is defined in the Configuration pages&rsquo;s <a href="configuration.html#Configuration-INISections">INI Sections</a> section, but we&rsquo;ll cover some additional web-specific sections here.</p>
<div class="alert alert-info">
    <span class="glyphicon glyphicon-info-sign"></span> <strong>Using Spring?</strong>
    <hr class="message-inner-separator">
    <p>Spring Framework users will not perform this setup.  If you use Spring, you will want to read about <a href="spring-boot.html#web-applications">Spring-specific web configuration</a> instead.</p>
</div>
<a name="Web-%7B%7Bweb.xml%7D%7D"></a>
<h3><a href="#web-xml" name="web-xml">web.xml</a></h3>
<a name="Web-Shiro1.2andlater"></a>
<h4>Shiro 1.2 and later</h4>
<p>In Shiro 1.2 and later, standard web applications initialize Shiro by adding the following XML chunks to <code>web.xml</code>:</p>
<pre><code class="xml">&lt;listener&gt;
    &lt;listener-class&gt;org.apache.shiro.web.env.EnvironmentLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

...

&lt;filter&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.shiro.web.servlet.ShiroFilter&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
    &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;
    &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;
&lt;/filter-mapping&gt;
</code></pre>
<p>This assumes a Shiro INI <a href="configuration.html" title="Configuration">Configuration</a> file is located at either of the following two locations, using whichever is found first:</p>
<ol>
  <li><code>/WEB-INF/shiro.ini</code></li>
  <li><code>shiro.ini</code> file at the root of the classpath.</li>
</ol>
<p>Here is what the above config does:</p>
<ul>
  <li>
  <p>The <code>EnvironmentLoaderListener</code> initializes a Shiro <code>WebEnvironment</code> instance (which contains everything Shiro needs to operate, including the <code>SecurityManager</code>) and makes it accessible in the <code>ServletContext</code>. If you need to obtain this <code>WebEnvironment</code> instance at any time, you can call <code>WebUtils.getRequiredWebEnvironment(servletContext)</code>.</p></li>
  <li>
  <p>The <code>ShiroFilter</code> will use this <code>WebEnvironment</code> to perform all necessary security operations for any filtered request.</p></li>
  <li>
  <p>Finally, the <code>filter-mapping</code> definition ensures that all requests are filtered by the <code>ShiroFilter</code>, recommended for most web applications to ensure that any request can be secured.</p></li>
</ul>
<div class="alert alert-success">
    <span class="glyphicon glyphicon-ok"></span> <strong>ShiroFilter filter-mapping</strong>
    <hr class="message-inner-separator">
    <p>It is usually desirable to define the `ShiroFilter filter-mapping` before any other `filter-mapping` declarations to ensure that Shiro can function in those filters as well.</p>
</div>
<div class="alert alert-success">
    <span class="glyphicon glyphicon-ok"></span> <strong>ShiroFilter default encoding</strong>
    <hr class="message-inner-separator">
    <p>The shiro filter is a standard servlet filter, with a default encoding of ISO-8859-1 according to the <a href="https://javaee.github.io/servlet-spec/downloads/servlet-4.0/servlet-4_0_FINAL.pdf">servlet specification</a>. However, the client can choose to send authentication data with a different encoding using the <code>charset</code> attribute of the <code>Content-Type</code> header.</p>
</div>
<a name="Web-Custom%7B%7BWebEnvironment%7D%7DClass"></a>
<h5>Custom <code>WebEnvironment</code> Class</h5>
<p>By default the <code>EnvironmentLoaderListener</code> will create an <code>IniWebEnvironment</code> instance, which assumes Shiro&rsquo;s INI-based <a href="configuration.html" title="Configuration">Configuration</a>. If you like, you may specify a custom <code>WebEnvironment</code> instance instead by specifying a <code>ServletContext</code> <code>context-param</code> in <code>web.xml</code>:</p>
<pre><code class="xml">&lt;context-param&gt;
    &lt;param-name&gt;shiroEnvironmentClass&lt;/param-name&gt;
    &lt;param-value&gt;com.foo.bar.shiro.MyWebEnvironment&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre>
<p>This allows you to customize how a configuration format is parsed and represented as a <code>WebEnvironment</code> instance. You could subclass the existing <code>IniWebEnvironment</code> for custom behavior, or support different configuration formats entirely. For example, if someone wanted to configure Shiro in XML instead of INI, they could create an XML-based implementation, e.g. <code>com.foo.bar.shiro.XmlWebEnvironment</code>.</p>
<a name="Web-CustomConfigurationLocations"></a>
<h5><a href="#custom-configuration-locations" name="custom-configuration-locations">Custom Configuration Locations</a></h5>
<p>The <code>IniWebEnvironment</code> class expects to read and load INI configuration files. By default, this class will automatically look in the following two locations for the Shiro <code>.ini</code> configuration (in order):</p>
<ol>
  <li><code>/WEB-INF/shiro.ini</code></li>
  <li><code>classpath:shiro.ini</code></li>
</ol>
<p>It will use whichever is found first.</p>
<p>However, if you wish to place your config in another location, you may specify that location with another <code>context-param</code> in <code>web.xml</code>:</p>
<pre><code class="xml">&lt;context-param&gt;
    &lt;param-name&gt;shiroConfigLocations&lt;/param-name&gt;
    &lt;param-value&gt;YOUR_RESOURCE_LOCATION_HERE&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre>
<p>By default, the <code>param-value</code> is expected to be resolvable by the rules defined by <code>ServletContext.</code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource-java.lang.String-"><code>getResource</code></a> method. For example, <code>/WEB-INF/some/path/shiro.ini</code></p>
<p>But you may also specify specific file-system, classpath or URL locations by using an appropriate resource prefix supported by Shiro&rsquo;s <a href="static/current/apidocs/org/apache/shiro/io/ResourceUtils.html">ResourceUtils class</a>, for example:</p>
<ul>
  <li><code>file:/home/foobar/myapp/shiro.ini</code></li>
  <li><code>classpath:com/foo/bar/shiro.ini</code></li>
  <li><code>url:http://confighost.mycompany.com/myapp/shiro.ini</code></li>
</ul>
<a name="Web-Shiro1.1andearlier"></a>
<h4>Shiro 1.1 and earlier</h4>
<p>The simplest way to enable Shiro in a 1.1 or earlier web application is to define the IniShiroFilter and specify a <code>filter-mapping</code>:</p>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.shiro.web.servlet.IniShiroFilter&lt;/filter-class&gt;
&lt;/filter&gt;

...

&lt;!-- Make sure any request you want accessible to Shiro is filtered. /* catches all --&gt;
&lt;!-- requests.  Usually this filter mapping is defined first (before all others) to --&gt;
&lt;!-- ensure that Shiro works in subsequent filters in the filter chain:             --&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
    &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;
    &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;
&lt;/filter-mapping&gt;
</code></pre>
<p>This definition expects your INI configuration to be in a shiro.ini file at the root of the classpath (e.g. <code>classpath:shiro.ini</code>).</p>
<a name="Web-CustomPath"></a>
<h5><a href="#custom-path" name="custom-path">Custom Path</a></h5>
<p>If you do not want to place your INI config in <code>/WEB-INF/shiro.ini</code> or <code>classpath:shiro.ini</code>, you may specify a custom resource location as necessary. Add a <code>configPath init-param</code> and specify a resource location:</p>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.shiro.web.servlet.IniShiroFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;configPath&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/anotherFile.ini&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;

...
</code></pre>
<p>Unqualified (schemeless or &lsquo;non-prefixed&rsquo;) <code>configPath</code> values are assumed to be <code>ServletContext</code> resource paths, resolvable via the rules defined by the<br/><code>ServletContext.</code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource-java.lang.String-"><code>getResource</code></a> method.</p>
<div class="alert alert-warning">
    <span class="glyphicon glyphicon-warning-sign"></span> <strong>ServletContext resource paths - Shiro 1.2+</strong>
    <hr class="message-inner-separator">
    <p>ServletContext resource paths are available in Shiro 1.2 and later. In 1.1 and earlier, all <code>configPath</code> definitions must specify a <code>classpath:</code>, <code>file:</code> or <code>url:</code> prefix.</p>
</div>
<p>You may also specify other non-<code>ServletContext</code> resource locations by using <code>classpath:</code>, <code>url:</code>, or <code>file:</code> prefixes indicating classpath, url, or filesystem locations respectively. For example:</p>
<pre><code class="xml">...
&lt;init-param&gt;
    &lt;param-name&gt;configPath&lt;/param-name&gt;
    &lt;param-value&gt;url:http://configHost/myApp/shiro.ini&lt;/param-value&gt;
&lt;/init-param&gt;
...
</code></pre>
<a name="Web-InlineConfig"></a>
<h5><a href="#inline-config" name="inline-config">Inline Config</a></h5>
<p>Finally, it is also possible to embed your INI configuration inline in web.xml without using an INI file at all. You do this by using the <code>config init-param</code> instead of <code>configPath</code>:</p>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.shiro.web.servlet.IniShiroFilter&lt;/filter-class&gt;
    &lt;init-param&gt;&lt;param-name&gt;config&lt;/param-name&gt;&lt;param-value&gt;

    # INI Config Here

    &lt;/param-value&gt;&lt;/init-param&gt;
&lt;/filter&gt;
...
</code></pre>
<p>Inline config is often fine for small or simple applications, but it is usually more convenient to externalize it in a dedicated shiro.ini file for the following reasons:</p>
<ul>
  <li>You might edit security configuration a lot and don&rsquo;t want to add revision control &lsquo;noise&rsquo; to the web.xml file</li>
  <li>You might want to separate security config from the rest of web.xml config</li>
  <li>Your security configuration might become large and you want to keep web.xml lean and easier to read</li>
  <li>You have a complex build system where the same shiro config might need to be referenced in multiple places</li>
</ul>
<p>It is up to you - use what makes sense for your project.</p>
<a name="Web-webini"></a>
<a name="Web-WebINIconfiguration"></a>
<h3><a href="#web-ini-configuration" name="web-ini-configuration">Web INI configuration</a></h3>
<p>In addition to the standard <code>[main]</code>, <code>[users]</code> and <code>[roles]</code> sections already described in the main <a href="configuration.html" title="Configuration">Configuration</a> chapter, you can additionally specify a web-specific <code>[urls]</code> section in your <code>shiro.ini</code> file:</p>
<pre><code class="ini"># [main], [users] and [roles] above here
...
[urls]
...
</code></pre>
<p>The <code>[urls]</code> section allows you to do something that doesn&rsquo;t exist in any web framework that we&rsquo;ve seen yet: the ability to define ad-hoc filter chains for any matching URL path in your application!</p>
<p>This is <em>far</em> more flexible, powerful and concise than how you define filter chains normally in <code>web.xml</code>: even if you never used any other feature that Shiro provided and used only this, it alone would make it worth using.</p>
<a name="Web-%7B%7B%5Curls%5C%7D%7D"></a>
<h4><a href="#urls-" name="urls-">[urls]</a></h4>
<p>The format of each line in the <code>urls</code> section is as follows:</p>
<pre><code class="ini">_URL_Ant_Path_Expression_ = _Path_Specific_Filter_Chain_
</code></pre>
<p>For example:</p>
<pre><code class="ini">...
[urls]

/index.html = anon
/user/create = anon
/user/** = authc
/admin/** = authc, roles[administrator]
/rest/** = authc, rest
/remoting/rpc/** = authc, perms[&quot;remote:invoke&quot;]
</code></pre>
<p>Next we&rsquo;ll cover exactly what these lines mean.</p>
<p>The token on the left of the equals sign (=) is an <a href="http://ant.apache.org">Ant</a>-style path expression relative to your web application&rsquo;s context root.</p>
<p>For example, let&rsquo;s say you had the following <code>[urls]</code> line:</p>
<pre><code class="ini">/account/** = ssl, authc
</code></pre>
<p>This line states that &ldquo;Any request to my application&rsquo;s path of <code>/account</code> or any of it&rsquo;s sub paths (<code>/account/foo</code>, <code>/account/bar/baz</code>, etc) will trigger the &lsquo;ssl, authc&rsquo; filter chain&rdquo;. We&rsquo;ll cover filter chains below.</p>
<p>Note that all path expressions are relative to your application&rsquo;s context root. This means that if you deploy your application one day to, say, <code>www.somehost.com/myapp</code> and then later deploy it to <code>www.anotherhost.com</code> (no &lsquo;myapp&rsquo; sub-path), the pattern matching will still work. All paths are relative to the <a href="http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/HttpServletRequest.html#getContextPath--">HttpServletRequest.getContextPath()</a> value.</p>
<div class="alert alert-warning">
    <span class="glyphicon glyphicon-warning-sign"></span> <strong>Order Matters!</strong>
    <hr class="message-inner-separator">
    <p>URL path expressions are evaluated against an incoming request in the order they are defined and the <em>FIRST MATCH WINS</em>.  For example, let's asume that there are the following chain definitions:

<pre><code class="ini">/account/** = ssl, authc
/account/signup = anon
</code></pre>
<p>If an incoming request is intended to reach <code>/account/signup/index.html</code> (accessible by all 'anon'ymous users), <em>it will never be handled!</em>.  The reason is that the <code>/account/**</code> pattern matched the incoming request first and 'short-circuited' all remaining definitions.</p>
<p>Always remember to define your filter chains based on a <em>FIRST MATCH WINS</em> policy!</p></p>
</div>
<a name="Web-FilterChainDefinitions"></a>
<h5><a href="#filter-chain-definitions" name="filter-chain-definitions">Filter Chain Definitions</a></h5>
<p>The token on the right of the equals sign (=) is comma-delimited list of filters to execute for a request matching that path. It must match the following format:</p>
<pre><code class="ini">filter1[optional_config1], filter2[optional_config2], ..., filterN[optional_configN]
</code></pre>
<p>where:</p>
<ul>
  <li><em>filterN</em> is the name of a filter bean defined in the <code>[main]</code> section and</li>
  <li><code>[optional_configN]</code> is an optional bracketed string that has meaning for that particular filter for <em>that particular path</em> (per-filter, <em>path-specific</em> configuration!). If the filter does not need specific config for that URL path, you may discard the brackets so <code>filterN[]</code> just becomes <code>filterN</code>.</li>
</ul>
<p>And because filter tokens define chains (aka a List), remember that order matters! Define your comma-delimited list in the order that you want the request to flow through the chain.</p>
<p>Finally, each filter is free to handle the response however it wants if its necessary conditions are not met (e.g. perform a redirect, respond with an HTTP error code, direct rendering, etc). Otherwise it is expected to allow the request to continue through the chain on to the final destination view.</p>
<div class="alert alert-success">
    <span class="glyphicon glyphicon-ok"></span> <strong>Tip</strong>
    <hr class="message-inner-separator">
    <p>Being able to react to path specific configuration, i.e. the <code>[optional_configN]</code> part of a filter token, is a unique feature available to Shiro filters.
<p>If you want to create your own <code>javax.servlet.Filter</code> implementation that can also do this, make sure your filter subclasses <a class="external-link" href="static/current/apidocs/org/apache/shiro/web/filter/PathMatchingFilter.html">org.apache.shiro.web.filter.PathMatchingFilter</a></p></p>
</div>
<a name="Web-AvailableFilters"></a>
<h6><a href="#available-filters" name="available-filters">Available Filters</a></h6>
<p>The &lsquo;pool&rsquo; of filters available for use in filter chain definitions are defined in the <code>[main]</code> section. The name assigned to them in the main section is the name to use in the filter chain definitions. For example:</p>
<pre><code class="ini">[main]
...
myFilter = com.company.web.some.FilterImplementation
myFilter.property1 = value1
...

[urls]
...
/some/path/** = myFilter
</code></pre>
<a name="Web-defaultfilters"></a>
<a name="Web-DefaultFilters"></a>
<h2><a href="#default-filters" name="default-filters">Default Filters</a></h2>
<p>When running a web-app, Shiro will create some useful default <code>Filter</code> instances and make them available in the <code>[main]</code> section automatically. You can configure them in <code>main</code> as you would any other bean and reference them in your chain definitions. For example:</p>
<pre><code class="ini">[main]
...
# Notice how we didn&#39;t define the class for the FormAuthenticationFilter (&#39;authc&#39;) - it is instantiated and available already:
authc.loginUrl = /login.jsp
...

[urls]
...
# make sure the end-user is authenticated.  If not, redirect to the &#39;authc.loginUrl&#39; above,
# and after successful authentication, redirect them back to the original account page they
# were trying to view:
/account/** = authc
...
</code></pre>
<p>The default Filter instances available automatically are defined by the <a href="static/current/apidocs/org/apache/shiro/web/filter/mgt/DefaultFilter.html">DefaultFilter enum</a> and the enum&rsquo;s <code>name</code> field is the name available for configuration. They are:</p>
<table>
  <thead>
    <tr>
      <th>Filter Name </th>
      <th>Class </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>anon </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/AnonymousFilter.html">org.apache.shiro.web.filter.authc.AnonymousFilter</a> </td>
    </tr>
    <tr>
      <td>authc </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/FormAuthenticationFilter.html">org.apache.shiro.web.filter.authc.FormAuthenticationFilter</a> </td>
    </tr>
    <tr>
      <td>authcBasic </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/BasicHttpAuthenticationFilter.html">org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter</a> </td>
    </tr>
    <tr>
      <td>authcBearer </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/BearerHttpAuthenticationFilter.html">org.apache.shiro.web.filter.authc.BearerHttpAuthenticationFilter</a> </td>
    </tr>
    <tr>
      <td>invalidRequest </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/InvalidRequestFilter.html">org.apache.shiro.web.filter.InvalidRequestFilter</a> </td>
    </tr>
    <tr>
      <td>logout </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/LogoutFilter.html">org.apache.shiro.web.filter.authc.LogoutFilter</a> </td>
    </tr>
    <tr>
      <td>noSessionCreation </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/session/NoSessionCreationFilter.html">org.apache.shiro.web.filter.session.NoSessionCreationFilter</a> </td>
    </tr>
    <tr>
      <td>perms </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authz/PermissionsAuthorizationFilter.html">org.apache.shiro.web.filter.authz.PermissionsAuthorizationFilter</a> </td>
    </tr>
    <tr>
      <td>port </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authz/PortFilter.html">org.apache.shiro.web.filter.authz.PortFilter</a> </td>
    </tr>
    <tr>
      <td>rest</td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authz/HttpMethodPermissionFilter.html">org.apache.shiro.web.filter.authz.HttpMethodPermissionFilter</a> </td>
    </tr>
    <tr>
      <td>roles </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authz/RolesAuthorizationFilter.html">org.apache.shiro.web.filter.authz.RolesAuthorizationFilter</a> </td>
    </tr>
    <tr>
      <td>ssl </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authz/SslFilter.html">org.apache.shiro.web.filter.authz.SslFilter</a> </td>
    </tr>
    <tr>
      <td>user </td>
      <td><a href="static/current/apidocs/org/apache/shiro/web/filter/authc/UserFilter.html">org.apache.shiro.web.filter.authc.UserFilter</a> </td>
    </tr>
  </tbody>
</table>
<a name="Web-EnablingandDisablingFilters"></a>
<h2><a href="#enabling-and-disabling-filters" name="enabling-and-disabling-filters">Enabling and Disabling Filters</a></h2>
<p>As is the case with any filter chain definition mechanism (<code>web.xml</code>, Shiro&rsquo;s INI, etc), you enable a filter just by including it in the filter chain definition, and you disable it by removing it from the chain definition.</p>
<p>But a new feature added in Shiro 1.2 is the ability to enable or disable filters without removing them from the filter chain. If enabled (the default setting), then a request will be filtered as expected. If disabled, then the filter will allow the request to pass through immediately to the next element in the <code>FilterChain</code>. You can trigger a filter&rsquo;s enabled state generally based on a configuration property, or you can even trigger it on a <em>per request</em> basis.</p>
<p>This is a powerful concept because it is often more convenient to enable or disable a filter based on certain requirements than to change the static filter chain definition, which would be permanent and inflexible.</p>
<p>Shiro accomplishes this via its <a href="static/current/apidocs/org/apache/shiro/web/servlet/OncePerRequestFilter.html">OncePerRequestFilter</a> abstract parent class. All of Shiro&rsquo;s out-of-the-box Filter implementations subclass this one and therefore are able to be enabled or disabled without removing them from the filter chain. You can subclass this class for your own filter implementations if you need this functionality as well*.</p>
<p>*<a href="https://issues.apache.org/jira/browse/SHIRO-224">SHIRO-224</a> will hopefully enable this feature for any filter, not just those subclassing <code>OncePerRequestFilter</code>. If this is important to you, please vote for the issue.</p>
<a name="Web-GeneralEnabling%2FDisabling"></a>
<h3><a href="#general-enabling-disabling" name="general-enabling-disabling">General Enabling/Disabling</a></h3>
<p>The <a href="static/current/apidocs/org/apache/shiro/web/servlet/OncePerRequestFilter.html">OncePerRequestFilter</a> (and all of its subclasses) supports enabling/disabling across all requests as well as on a per-request basis.</p>
<p>General enabling or disabling of a filter for all requests is done by setting its <code>enabled</code> property to true or false. The default setting is <code>true</code> since most filters inherently need to execute if they are configured in a chain.</p>
<p>For example, in shiro.ini:</p>
<pre><code class="ini">[main]
...
# configure Shiro&#39;s default &#39;ssl&#39; filter to be disabled while testing:
ssl.enabled = false

[urls]
...
/some/path = ssl, authc
/another/path = ssl, roles[admin]
...
</code></pre>
<p>This example shows that potentially many URL paths can all require that a request must be secured by an SSL connection. Setting up SSL while in development can be frustrating and time consuming. While in development, you can disable the ssl filter. When deploying to production, you can enable it with one configuration property - something that is much easier than manually changing all of the URL paths or maintaining two Shiro configurations.</p>
<a name="Web-RequestspecificEnabling%2FDisabling"></a>
<h3>Request-specific Enabling/Disabling</h3>
<p><code>OncePerRequestFilter</code> actually determines if the filter is enabled or disabled based on its <code>isEnabled(request, response)</code> method.</p>
<p>This method defaults to returning the value of the <code>enabled</code> property, which is used for generally enabling/disabling all requests as mentioned above. If you wanted to enable or disable a filter based on <em>request specific</em> criteria, you can override the <code>OncePerRequestFilter</code> <code>isEnabled(request,response)</code> method to perform more specific checks.</p>
<a name="Web-PathspecificEnabling%2FDisabling"></a>
<h3>Path-specific Enabling/Disabling</h3>
<p>Shiro&rsquo;s <a href="static/current/apidocs/org/apache/shiro/web/filter/PathMatchingFilter.html">PathMatchingFilter</a> (a subclass of <code>OncePerRequestFilter</code> has the ability to react to configuration based on a <em>specific path</em> being filtered. This means you can enable or disable a filter based on the path and the path-specific configuration in addition to the incoming request and response.</p>
<p>If you need to be able to react to the matching path and the path-specific configuration to determine if a filter is enabled or disabled, instead of overriding <code>OncePerRequestFilter</code> <code>isEnabled(request,response)</code> method, you would override the <code>PathMatchingFilter</code> <code>isEnabled(request,response,path,pathConfig)</code> method instead.</p>
<a name="Web-globalFilters"></a>
<h3><a href="#global-filters" name="global-filters">Global Filters</a></h3>
<p>Starting with Shiro 1.6 the ability to define global filters has been added. Adding &ldquo;global filters&rdquo; will add additional filters to ALL routes, this includes previously configured filter chains as well as unconfigured paths.</p>
<p>By default, the global filters contains the <code>invalidRequest</code> filter. This filter blocks known malicious attacks, see below for configuration details.</p>
<p>Global filters can be customized or disabled, for example</p>
<pre><code class="ini">[main]
...
# disable Global Filters
filterChainResolver.globalFilters = null
</code></pre>
<p>Define the list of global filters:</p>
<pre><code class="ini">[main]
...
filterChainResolver.globalFilters = invalidRequest, port
</code></pre>
<p>The <code>invalidRequest</code> filter blocks requests with non-ascii characters, semicolons, and backslashes, each of these can be disabled independently to allow for backward compatibility.</p>
<pre><code class="ini">[main]
...
invalidRequest.blockBackslash = true
invalidRequest.blockSemicolon = true
invalidRequest.blockNonAscii = true
...
</code></pre>
<div class="alert alert-info">
    <span class="glyphicon glyphicon-info-sign"></span> <strong>Note</strong>
    <hr class="message-inner-separator">
    <p>If you currently allowing URL rewriting to allow for a <code>jsessionid</code> in the URL, you must set <code>blockSemicolon</code> to <code>false</code>.<BR/><BR/>URL rewriting for <code>jsessionid</code> is defined in section "7.1.3" of the Java Servlet Specification, but it is generally NOT recommended.</p>
</div>
<a name="Web-HSTS"></a>
<h3>HTTP Strict Transport Security (HSTS)</h3>
<p>The <a href="static/current/apidocs/org/apache/shiro/web/filter/authz/SslFilter.html">SslFilter</a> (and all of its subclasses) supports enabling/disabling HTTP Strict Transport Security (HSTS).</p>
<p>For example, in shiro.ini:</p>
<pre><code class="ini">[main]
...
# configure Shiro&#39;s default &#39;ssl&#39; filter to enabled HSTS:
ssl.enabled = true
ssl.hsts.enabled = true
ssl.hsts.includeSubDomains = true

[urls]
...
/some/path = ssl, authc
/another/path = ssl, roles[admin]
...
</code></pre>
<a name="Web-sessionManagement"></a>
<a name="Web-SessionManagement"></a>
<h2><a href="#session-management" name="session-management">Session Management</a></h2>
<a name="Web-ServletContainerSessions"></a>
<h3><a href="#servlet-container-sessions" name="servlet-container-sessions">Servlet Container Sessions</a></h3>
<p>In web environments, Shiro&rsquo;s default session manager <a href="static/current/apidocs/org/apache/shiro/session/mgt/SessionManager.html"><code>SessionManager</code></a> implementation is the <a href="static/current/apidocs/org/apache/shiro/web/session/mgt/ServletContainerSessionManager.html"><code>ServletContainerSessionManager</code></a>. This very simple implementation delegates all session management duties (including session clustering if the servlet container supports it) to the runtime Servlet container. It is essentially a bridge for Shiro&rsquo;s session API to the servlet container and does little else.</p>
<p>A benefit of using this default is that apps that work with existing servlet container session configuration (timeout, any container-specific clustering mechanisms, etc) will work as expected.</p>
<p>A downside of this default is that you are tied to the servlet container&rsquo;s specific session behavior. For example, if you wanted to cluster sessions, but you used Jetty for testing and Tomcat in production, your container-specific configuration (or code) would not be portable.</p>
<a name="Web-ServletContainerSessionTimeout"></a>
<h4><a href="#servlet-container-session-timeout" name="servlet-container-session-timeout">Servlet Container Session Timeout</a></h4>
<p>If using the default servlet container support, you configure session timeout as expected in your web application&rsquo;s <code>web.xml</code> file. For example:</p>
<pre><code class="xml">&lt;session-config&gt;
  &lt;!-- web.xml expects the session timeout in minutes: --&gt;
  &lt;session-timeout&gt;30&lt;/session-timeout&gt;
&lt;/session-config&gt;
</code></pre>
<a name="Web-NativeSessions"></a>
<h3><a href="#native-sessions" name="native-sessions">Native Sessions</a></h3>
<p>If you want your session configuration settings and clustering to be portable across servlet containers (e.g. Jetty in testing, but Tomcat or JBoss in production), or you want to control specific session/clustering features, you can enable Shiro&rsquo;s native session management.</p>
<p>The word &lsquo;Native&rsquo; here means that Shiro&rsquo;s own enterprise session management implementation will be used to support all <code>Subject</code> and <code>HttpServletRequest</code> sessions and bypass the servlet container completely. But rest assured - Shiro implements the relevant parts of the Servlet specification directly so any existing web/http related code works as expected and never needs to &lsquo;know&rsquo; that Shiro is transparently managing sessions.</p>
<a name="Web-%7B%7BDefaultWebSessionManager%7D%7D"></a>
<h4><a href="#defaultwebsessionmanager" name="defaultwebsessionmanager">DefaultWebSessionManager</a></h4>
<p>To enable native session management for your web application, you will need to configure a native web-capable session manager to override the default servlet container-based one. You can do that by configuring an instance of <a href="static/current/apidocs/org/apache/shiro/web/session/mgt/DefaultWebSessionManager.html"><code>DefaultWebSessionManager</code></a> on Shiro&rsquo;s <code>SecurityManager</code>. For example, in <code>shiro.ini</code>:</p>
<p><strong>shiro.ini native web session management</strong></p>
<pre><code class="ini">[main]
...
sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
# configure properties (like session timeout) here if desired

# Use the configured native session manager:
securityManager.sessionManager = $sessionManager
</code></pre>
<p>Once declared, you can configure the <code>DefaultWebSessionManager</code> instance with native session options like session timeout and clustering configuration as described in the <a href="session-management.html" title="Session Management">Session Management</a> section.</p>
<a name="Web-NativeSessionTimeout"></a>
<h5><a href="#native-session-timeout" name="native-session-timeout">Native Session Timeout</a></h5>
<p>After configuring the <code>DefaultWebSessionManager</code> instance, session timeout is configured as described in <a href="session-management.html#SessionManagement-sessionTimeout">Session Management: Session Timeout</a></p>
<a name="Web-SessionCookie"></a>
<h5><a href="#session-cookie" name="session-cookie">Session Cookie</a></h5>
<p>The <code>DefaultWebSessionManager</code> supports two web-specific configuration properties:</p>
<ul>
  <li><code>sessionIdCookieEnabled</code> (a boolean)</li>
  <li><code>sessionIdCookie</code>, a <a href="static/current/apidocs/org/apache/shiro/web/servlet/Cookie.html">Cookie</a> instance.</li>
</ul>
<div class="alert alert-info">
    <span class="glyphicon glyphicon-info-sign"></span> <strong>Cookie as a template</strong>
    <hr class="message-inner-separator">
    <p>The <code>sessionIdCookie</code> property is essentially a template - you configure the <code>Cookie</code> instance properties, and this template will be used to set the actual HTTP `Cookie` header at runtime with an appropriate session ID value.</p>
</div>
<a name="Web-SessionCookieConfiguration"></a>
<h6><a href="#session-cookie-configuration" name="session-cookie-configuration">Session Cookie Configuration</a></h6>
<p>The DefaultWebSessionManager&rsquo;s <code>sessionIdCookie</code> default instance is a <a href="static/current/apidocs/org/apache/shiro/web/servlet/SimpleCookie.html"><code>SimpleCookie</code></a>. This simple implementation allows JavaBeans-style property configuration for all of the relevant properties you would want to configure on an http Cookie.</p>
<p>For example, you could set the Cookie domain:</p>
<pre><code class="ini">[main]
...
securityManager.sessionManager.sessionIdCookie.domain = foo.com
</code></pre>
<p>See the <a href="static/current/apidocs/org/apache/shiro/web/servlet/SimpleCookie.html">SimpleCookie JavaDoc</a> for additional properties.</p>
<p>The cookie&rsquo;s default name is <code>JSESSIONID</code> in accordance with the servlet specification. Additionally, Shiro&rsquo;s cookie supports the <a href="https://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie"><code>HttpOnly</code></a> and <a href="https://en.wikipedia.org/wiki/HTTP_cookie#Same-site_cookie"><code>SameSite</code></a> flags. The <code>sessionIdCookie</code> sets <code>HttpOnly</code> to <code>true</code> and <code>SameSite</code> to <code>LAX</code> by default for extra security.</p>
<div class="alert alert-info">
    <span class="glyphicon glyphicon-info-sign"></span> <strong>Note</strong>
    <hr class="message-inner-separator">
    <p>Shiro's <code>Cookie</code> concept supports the <code>HttpOnly</code> flag even in Servlet 2.4 and 2.5 environments (whereas the Servlet API only supports it natively in 2.6 or later).</p>
</div>
<a name="Web-DisablingtheSessionCookie"></a>
<h6><a href="#disabling-the-session-cookie" name="disabling-the-session-cookie">Disabling the Session Cookie</a></h6>
<p>If you do not want session cookies to be used, you can disable their use by configuring the <code>sessionIdCookieEnabled</code> property to false. For example:</p>
<p><strong>Disabling native session cookies</strong></p>
<pre><code class="ini">[main]
...
securityManager.sessionManager.sessionIdCookieEnabled = false
</code></pre>
<a name="Web-rememberme"></a>
<a name="Web-RememberMeServices"></a>
<h2><a href="#remember-me-services" name="remember-me-services">Remember Me Services</a></h2>
<p>Shiro will perform &lsquo;rememberMe&rsquo; services if the <code>AuthenticationToken</code> implements the <a href="static/current/apidocs/org/apache/shiro/authc/RememberMeAuthenticationToken.html"><code>org.apache.shiro.authc.RememberMeAuthenticationToken</code></a> interface. This interface specifies a method:</p>
<pre><code class="java">boolean isRememberMe();
</code></pre>
<p>If this method returns <code>true</code>, Shiro will remember the end-user&rsquo;s identity across sessions.</p>
<div class="alert alert-success">
    <span class="glyphicon glyphicon-ok"></span> <strong>UsernamePasswordToken and RememberMe</strong>
    <hr class="message-inner-separator">
    <p>The frequently-used <code>UsernamePasswordToken</code> already implements the <code>RememberMeAuthenticationToken</code> interface and supports rememberMe logins.</p>
</div>
<a name="Web-ProgrammaticSupport"></a>
<h3><a href="#programmatic-support" name="programmatic-support">Programmatic Support</a></h3>
<p>To use rememberMe programmatically, you can set the value to <code>true</code> on a class that supports this configuration. For example, using the standard <code>UsernamePasswordToken</code>:</p>
<pre><code class="java">UsernamePasswordToken token = new UsernamePasswordToken(username, password);

token.setRememberMe(true);

SecurityUtils.getSubject().login(token);
...
</code></pre>
<a name="Web-FormbasedLogin"></a>
<h3>Form-based Login</h3>
<p>For web applications, the <code>authc</code> filter is by default a <a href="static/current/apidocs/org/apache/shiro/web/filter/authc/FormAuthenticationFilter.html"><code>FormAuthenticationFilter</code></a>. This supports reading the &lsquo;rememberMe&rsquo; boolean as a form/request parameter. By default, it expects the request param to be named <code>rememberMe</code>. Here is an example shiro.ini config supporting this:</p>
<pre><code class="ini">[main]
authc.loginUrl = /login.jsp

[urls]

# your login form page here:
login.jsp = authc
</code></pre>
<p>And in your web form, have a checkbox named &lsquo;rememberMe&rsquo;:</p>
<pre><code class="html">&lt;form ...&gt;

   Username: &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; &lt;br/&gt;
   Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt;
    ...
   &lt;input type=&quot;checkbox&quot; name=&quot;rememberMe&quot; value=&quot;true&quot;/&gt;Remember Me?
   ...
&lt;/form&gt;
</code></pre>
<p>By default, the <code>FormAuthenticationFilter</code> will look for request parameters named <code>username</code>, <code>password</code> and <code>rememberMe</code>. If these are different than the form field names that you use in your form, you&rsquo;ll want to configure the names on the <code>FormAuthenticationFilter</code>. For example, in <code>shiro.ini</code>:</p>
<pre><code class="ini">[main]
...
authc.loginUrl = /whatever.jsp
authc.usernameParam = somethingOtherThanUsername
authc.passwordParam = somethingOtherThanPassword
authc.rememberMeParam = somethingOtherThanRememberMe
...
</code></pre>
<a name="Web-Cookieconfiguration"></a>
<h3><a href="#cookie-configuration" name="cookie-configuration">Cookie configuration</a></h3>
<p>You can configure how the <code>rememberMe</code> cookie functions by setting the default {{RememberMeManager}}s various cookie properties. For example, in shiro.ini:</p>
<pre><code class="ini">[main]
...

securityManager.rememberMeManager.cookie.name = foo
securityManager.rememberMeManager.cookie.maxAge = blah
...
</code></pre>
<p>See the <a href="static/current/apidocs/org/apache/shiro/web/mgt/CookieRememberMeManager.html"><code>CookieRememberMeManager</code></a> and the supporting <a href="static/current/apidocs/src-html/org/apache/shiro/web/servlet/SimpleCookie.html"><code>SimpleCookie</code></a> JavaDoc for configuration properties.</p>
<a name="Web-Custom%7B%7BRememberMeManager%7D%7D"></a>
<h3>Custom <code>RememberMeManager</code></h3>
<p>It should be noted that if the default cookie-based <code>RememberMeManager</code> implementation does not meet your needs, you can plug in any you like in to the <code>securityManager</code> like you would configure any other object reference:</p>
<pre><code class="ini">[main]
...
rememberMeManager = com.my.impl.RememberMeManager
securityManager.rememberMeManager = $rememberMeManager
</code></pre>
<a name="Web-taglibrary"></a>
<a name="Web-JSP%2FGSPTagLibrary"></a>
<h2><a href="#jsp-gsp-tag-library" name="jsp-gsp-tag-library">JSP / GSP Tag Library</a></h2>
<p>Apache Shiro provides a <code>Subject</code>-aware JSP/GSP tag library that allows you to control your JSP, JSTL or GSP page output based on the current Subject&rsquo;s state. This is quite useful for personalizing views based on the identity and authorization state of the current user viewing the web page.</p>
<a name="Web-taglibrary"></a>
<a name="Web-TagLibraryConfiguration"></a>
<h3><a href="#tag-library-configuration" name="tag-library-configuration">Tag Library Configuration</a></h3>
<p>The Tag Library Descriptor (TLD) file is bundled in <code>shiro-web.jar</code> in the <code>META-INF/shiro.tld</code> file. To use any of the tags, add the following line to the top of your JSP page (or wherever you define page directives):</p>
<pre><code class="html">&lt;%@ taglib prefix=&quot;shiro&quot; uri=&quot;http://shiro.apache.org/tags&quot; %&gt;
</code></pre>
<p>We&rsquo;ve used the <code>shiro</code> prefix to indicate the shiro tag library namespace, but you can assign whatever name you like.</p>
<p>Now we&rsquo;ll cover each tag and show how it might be used to render a page.</p>
<a name="Web-guesttag"></a>
<a name="Web-The%7B%7Bguest%7D%7Dtag"></a>
<h3>The <code>guest</code> tag</h3>
<p>The <code>guest</code> tag will display its wrapped content only if the current <code>Subject</code> is considered a &lsquo;guest&rsquo;. A guest is any <code>Subject</code> that does not have an identity. That is, we don&rsquo;t know who the user is because they have not logged in and they are not remembered (from Remember Me services) from a previous site visit.</p>
<p>Example:</p>
<pre><code class="html">&lt;shiro:guest&gt;
    Hi there!  Please &lt;a href=&quot;login.jsp&quot;&gt;Login&lt;/a&gt; or &lt;a href=&quot;signup.jsp&quot;&gt;Signup&lt;/a&gt; today!
&lt;/shiro:guest&gt;
</code></pre>
<p>The <code>guest</code> tag is the logical opposite of the <a href="#Web-usertag"><code>user</code></a> tag.</p>
<a name="Web-usertag"></a>
<a name="Web-The%7B%7Buser%7D%7Dtag"></a>
<h3>The <code>user</code> tag</h3>
<p>The <code>user</code> tag will display its wrapped content only if the current <code>Subject</code> is considered a &lsquo;user&rsquo;. A &lsquo;user&rsquo; in this context is defined as a <code>Subject</code> with a known identity, either from a successful authentication or from &lsquo;RememberMe&rsquo; services. Note that this tag is semantically different from the <a href="#Web-authenticatedtag">authenticated</a> tag, which is more restrictive than this tag.</p>
<p>Example:</p>
<pre><code class="html">&lt;shiro:user&gt;
    Welcome back John!  Not John? Click &lt;a href=&quot;login.jsp&quot;&gt;here&lt;a&gt; to login.
&lt;/shiro:user&gt;
</code></pre>
<p>The <code>user</code> tag is the logical opposite of the <a href="#Web-guesttag"><code>guest</code></a> tag.</p>
<a name="Web-authenticatedtag"></a>
<a name="Web-The%7B%7Bauthenticated%7D%7Dtag"></a>
<h3>The <code>authenticated</code> tag</h3>
<p>Displays body content only if the current user has successfully authenticated <em>during their current session</em>. It is more restrictive than the &lsquo;user&rsquo; tag. It is logically opposite to the &lsquo;notAuthenticated&rsquo; tag.</p>
<p>The <code>authenticated</code> tag will display its wrapped content only if the current <code>Subject</code> has successfully authenticated <em>during their current session</em>. It is a more restrictive tag than the <a href="#Web-usertag">user</a>, which is used to guarantee identity in sensitive workflows.</p>
<p>Example:</p>
<pre><code class="html">&lt;shiro:authenticated&gt;
    &lt;a href=&quot;updateAccount.jsp&quot;&gt;Update your contact information&lt;/a&gt;.
&lt;/shiro:authenticated&gt;
</code></pre>
<p>The <code>authenticated</code> tag is the logical opposite of the <a href="#Web-notauthenticatedtag"><code>notAuthenticated</code></a> tag.</p>
<a name="Web-notauthenticatedtag"></a>
<a name="Web-The%7B%7BnotAuthenticated%7D%7Dtag"></a>
<h3>The <code>notAuthenticated</code> tag</h3>
<p>The <code>notAuthenticated</code> tag will display its wrapped content if the current <code>Subject</code> has <strong>NOT</strong> yet successfully authenticated during the current session.</p>
<p>Example:</p>
<pre><code class="html">&lt;shiro:notAuthenticated&gt;
    Please &lt;a href=&quot;login.jsp&quot;&gt;login&lt;/a&gt; in order to update your credit card information.
&lt;/shiro:notAuthenticated&gt;
</code></pre>
<p>The <code>notAuthenticated</code> tag is the logical opposite of the <a href="#Web-authenticatedtag"><code>authenticated</code></a> tag.</p>
<a name="Web-principaltag"></a>
<a name="Web-The%7B%7Bprincipal%7D%7Dtag"></a>
<h3>The <code>principal</code> tag</h3>
<p>The <code>principal</code> tag will output the Subject&rsquo;s <a href="static/current/apidocs/org/apache/shiro/subject/Subject.html#getPrincipal--"><code>principal</code></a> (identifying attribute) or a property of that principal.</p>
<p>Without any tag attributes, the tag will render the <code>toString()</code> value of the principal. For example (assuming the principal is a String username):</p>
<pre><code class="html">Hello, &lt;shiro:principal/&gt;, how are you today?
</code></pre>
<p>This is (mostly) equivalent to the following:</p>
<pre><code class="html">Hello, &lt;%= SecurityUtils.getSubject().getPrincipal().toString() %&gt;, how are you today?
</code></pre>
<a name="Web-Typedprincipal"></a>
<h4><a href="#typed-principal" name="typed-principal">Typed principal</a></h4>
<p>The <code>principal</code> tag assumes by default that the principal to print is the <code>subject.getPrincipal()</code> value. But if you wanted to print a value that is <em>not</em> the primary principal, but another in the Subject&rsquo;s {<a href="static/current/apidocs/org/apache/shiro/subject/Subject.html#getPrincipals--">principal collection</a>, you can acquire that principal by type and print that value instead.</p>
<p>For example, printing the Subject&rsquo;s user ID (and not the username), assuming the ID was in the principal collection:</p>
<pre><code class="html">User ID: &lt;principal type=&quot;java.lang.Integer&quot;/&gt;
</code></pre>
<p>This is (mostly) equivalent to the following:</p>
<pre><code class="html">User ID: &lt;%= SecurityUtils.getSubject().getPrincipals().oneByType(Integer.class).toString() %&gt;
</code></pre>
<a name="Web-Principalproperty"></a>
<h4><a href="#principal-property" name="principal-property">Principal property</a></h4>
<p>But what if the principal (either the default primary principal or &lsquo;typed&rsquo; principal above) is a complex object and not a simple string, and you wanted to reference a property on that principal? You can use the <code>property</code> attribute to indicate the name of the property to read (must be accessible via a JavaBeans-compatible getter method). For example (assuming the primary principal is a User object):</p>
<pre><code class="html">Hello, &lt;shiro:principal property=&quot;firstName&quot;/&gt;, how are you today?
</code></pre>
<p>This is (mostly) equivalent to the following:</p>
<pre><code class="html">Hello, &lt;%= SecurityUtils.getSubject().getPrincipal().getFirstName().toString() %&gt;, how are you today?
</code></pre>
<p>Or, combined with the type attribute:</p>
<pre><code class="html">Hello, &lt;shiro:principal type=&quot;com.foo.User&quot; property=&quot;firstName&quot;/&gt;, how are you today?
</code></pre>
<p>this is largely equivalent to the following:</p>
<pre><code class="html">Hello, &lt;%= SecurityUtils.getSubject().getPrincipals().oneByType(com.foo.User.class).getFirstName().toString() %&gt;, how are you today?
</code></pre>
<a name="Web-hasroletag"></a>
<a name="Web-The%7B%7BhasRole%7D%7Dtag"></a>
<h3>The <code>hasRole</code> tag</h3>
<p>The <code>hasRole</code> tag will display its wrapped content only if the current <code>Subject</code> is assigned the specified role.</p>
<p>For example:</p>
<pre><code class="html">&lt;shiro:hasRole name=&quot;administrator&quot;&gt;
    &lt;a href=&quot;admin.jsp&quot;&gt;Administer the system&lt;/a&gt;
&lt;/shiro:hasRole&gt;
</code></pre>
<p>The <code>hasRole</code> tag is the logical opposite of the <a href="#Web-lacksroletag">lacksRole</a> tag.</p>
<a name="Web-lacksroletag"></a>
<a name="Web-The%7B%7BlacksRole%7D%7Dtag"></a>
<h3>The <code>lacksRole</code> tag</h3>
<p>The <code>lacksRole</code> tag will display its wrapped content only if the current <code>Subject</code> <strong>is NOT</strong> assigned the specified role.</p>
<p>For example:</p>
<pre><code class="html">&lt;shiro:lacksRole name=&quot;administrator&quot;&gt;
    Sorry, you are not allowed to administer the system.
&lt;/shiro:lacksRole&gt;
</code></pre>
<p>The <code>lacksRole</code> tag is the logical opposite of the <a href="#Web-hasroletag">hasRole</a> tag.</p>
<a name="Web-hasanyroletag"></a>
<a name="Web-The%7B%7BhasAnyRole%7D%7Dtag"></a>
<h3>The <code>hasAnyRole</code> tag</h3>
<p>The <code>hasAnyRole</code> tag will display its wrapped content if the current <code>Subject</code> is assigned <em>any</em> of the specified roles from a comma-delimited list of role names.</p>
<p>For example:</p>
<pre><code class="html">&lt;shiro:hasAnyRoles name=&quot;developer, project manager, administrator&quot;&gt;
    You are either a developer, project manager, or administrator.
&lt;/shiro:hasAnyRoles&gt;
</code></pre>
<p>The <code>hasAnyRole</code> tag does not currently have a logically opposite tag.</p>
<a name="Web-haspermissiontag"></a>
<a name="Web-The%7B%7BhasPermission%7D%7Dtag"></a>
<h3>The <code>hasPermission</code> tag</h3>
<p>The <code>hasPermission</code> tag will display its wrapped content only if the current <code>Subject</code> &lsquo;has&rsquo; (implies) the specified permission. That is, the user has the specified ability.</p>
<p>For example:</p>
<pre><code class="html">&lt;shiro:hasPermission name=&quot;user:create&quot;&gt;
    &lt;a href=&quot;createUser.jsp&quot;&gt;Create a new User&lt;/a&gt;
&lt;/shiro:hasPermission&gt;
</code></pre>
<p>The <code>hasPermission</code> tag is the logical opposite of the <a href="#Web-lackspermissiontag">lacksPermission</a> tag.</p>
<a name="Web-lackspermissiontag"></a>
<a name="Web-The%7B%7BlacksPermission%7D%7Dtag"></a>
<h3>The <code>lacksPermission</code> tag</h3>
<p>The <code>lacksPermission</code> tag will display its wrapped content only if the current <code>Subject</code> <strong>DOES NOT</strong> have (imply) the specified permission. That is, the user <strong>DOES NOT</strong> have the specified ability.</p>
<p>For example:</p>
<pre><code class="html">&lt;shiro:lacksPermission name=&quot;user:delete&quot;&gt;
    Sorry, you are not allowed to delete user accounts.
&lt;/shiro:lacksPermission&gt;
</code></pre>
<p>The <code>lacksPermission</code> tag is the logical opposite of the <a href="#Web-haspermissiontag">hasPermission</a> tag.</p>
<h2><a name="Lendahandwithdocumentation"></a>Lend a hand with documentation </h2>
<p>While we hope this documentation helps you with the work you're doing with Apache Shiro, the community is improving and expanding the documentation all the time.  If you'd like to help the Shiro project, please consider correcting, expanding, or adding documentation where you see a need. Every little bit of help you provide expands the community and in turn improves Shiro. </p>
<p>The easiest way to contribute your documentation is to submit a pull-request by clicking on the <code>Edit</code> link below, send it to the <a class="external-link" href="http://shiro-user.582556.n2.nabble.com/" rel="nofollow">User Forum</a> or the <a href="mailing-lists.html" title="Mailing Lists">User Mailing List</a>.</p>
<input type="hidden" id="ghEditPage" value="web.md.vtl"></input>
</div>

    <div class="footer-padding"></div>
    <footer class="custom-footer">

        <div class="col-md-5">
            <div class="copyright-footer">
            <a href="http://www.apache.org/foundation/contributing.html">Donate to the ASF</a> |
            <a href="http://www.apache.org/licenses/LICENSE-2.0.html">License</a>
            <p>Copyright &copy; 2008-2021 The Apache Software Foundation</p>
                </div>
        </div>

        <div class="social col-md-2">
            <a class="btn btn-social-icon btn-sm btn-twitter" target="_blank" href="https://twitter.com/ApacheShiro"><span class="fa fa-twitter"></span></a>
            <a class="btn btn-social-icon btn-sm btn-facebook" target="_blank" href="https://www.facebook.com/ApacheShiro"><span class="fa fa-facebook"></span></a>
            <a class="btn btn-social-icon btn-sm btn-linkedin" target="_blank" href="https://www.linkedin.com/groups/4382576"><span class="fa fa-linkedin"></span></a>
        </div>


        <div class="col-md-2"></div>
        <div class="col-md-2 editThisPage">
            <div class="footer-shield"></div>
        </div>

    </footer> <!--END FOOTER-->

</body>
</html>
